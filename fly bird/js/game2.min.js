var Game=function(){var e=this,c=$(".bird"),g=$(".game-container"),j=$(".map"),h=0,i,k,l=[],m={};this.start=function(){e.scrollMap();e.birdDown();e.checkBoom();$(document).keyup(function(a){38==a.keyCode&&(window.clearTimeout(i),c.css("top",c.offset().top-c.height()-20+"px"),e.birdDown())})};this.init=function(){g.scrollLeft(0);c.css("top","200px");for(var a=0;20>a;)e.addBar(),a++};this.scrollMap=function(){g.animate({scrollLeft:j.width()-g.width()+"px"},24E3,null);c.animate({left:j.width()-g.width()+"px"},24E3,function(){alert("\u606d\u559c\u4f60\uff0c\u8fc7\u5173\u5566\uff0c\u5237\u65b0\u91cd\u6765\uff1a\uff09");window.clearInterval(i);window.clearInterval(k);g.stop();c.stop()})};this.addBar=function(){var a=Math.random(),f=Math.floor(300*a),f=100>f?100:f,c="bar"+h,d="<div class='bar &barnum'></div>".replace("&barnum",c);j.append(d);var d=150*(h+1),e;0.5>a?(a=0,e=f,$("."+c).css("top","0").css("height",f+"px").css("left",d+"px")):(a=400-f,e=400,$("."+c).css("bottom","0").css("height",f+"px").css("left",d+"px"));m={left1:d,left2:d+20,top1:a,top2:e};l.push(m);h++};this.birdDown=function(){i=window.setInterval(function(){c.css("top",c.offset().top-c.height()+5+"px")},100)};this.checkBoom=function(){var a,f,g,d,i,j,b;k=window.setInterval(function(){i=c.css("left").replace("px","");j=c.css("top").replace("px","");a=+i;f=a+30;g=+j;d=g+20;(400<=d||0>=g)&&e.gameOver();for(var h=0;h<l.length;h++)if(b=l[h],!(a>b.left2)){if(d>b.top1&&d<b.top2&&f>b.left1&&f<b.left2){e.gameOver();break}if(d>b.top1&&d<b.top2&&f>b.left1&&f<b.left2){e.gameOver();break}if(d>b.top1&&d<b.top2&&a>b.left1&&a<b.left2){e.gameOver();break}if(g>b.top1&&g<b.top2&&a>b.left1&&a<b.left2){e.gameOver();break}}},100)};this.gameOver=function(){alert("Game Over");window.clearInterval(i);window.clearInterval(k);g.stop();c.stop()}};